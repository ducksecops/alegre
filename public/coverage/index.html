<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Api-mlg</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.0/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.0/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.0/favicon_green.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.0/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.0/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2015-01-01T12:00:00Z">2015-01-01T12:00:00Z</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         24.42
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>14</b> files in total.
    <b>338</b> relevant lines. 
    <span class="green"><b>338</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#cb3bb5bb0c978c0cab476b294ff1e33bc75bd0e0" class="src_link" title="app/controllers/api/v1/base_api_controller.rb">app/controllers/api/v1/base_api_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>101</td>
        <td>41</td>
        <td>41</td>
        <td>0</td>
        <td>94.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#853a207de94c1a5d4c37d45a54c829ff9c2c1011" class="src_link" title="app/controllers/api/v1/dictionary_controller.rb">app/controllers/api/v1/dictionary_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>158</td>
        <td>88</td>
        <td>88</td>
        <td>0</td>
        <td>23.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e0bca53619c98da3ba0a8baab5ff6cc097763ddf" class="src_link" title="app/controllers/api/v1/glossary_controller.rb">app/controllers/api/v1/glossary_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>52</td>
        <td>29</td>
        <td>29</td>
        <td>0</td>
        <td>4.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6b6b2785cfd9995a483950d816da10673299b8b6" class="src_link" title="app/controllers/api/v1/languages_controller.rb">app/controllers/api/v1/languages_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>41</td>
        <td>23</td>
        <td>23</td>
        <td>0</td>
        <td>3.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ee64efe3a50deaf81fbe5e80786f8e626dd272f1" class="src_link" title="app/controllers/application_controller.rb">app/controllers/application_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>4</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#7dab2c34e958caacafb0df83766ed364ba0db973" class="src_link" title="app/controllers/concerns/dictionary_doc.rb">app/controllers/concerns/dictionary_doc.rb</a></td>
        <td class="red strong">0.0 %</td>
        <td>24</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0d9c18355c2eee128ec2d4a87b7923e2035209ff" class="src_link" title="app/controllers/concerns/glossary_doc.rb">app/controllers/concerns/glossary_doc.rb</a></td>
        <td class="red strong">0.0 %</td>
        <td>55</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e7d24d97b2e7702b2ba067ffd437a82e7b1bd188" class="src_link" title="app/controllers/concerns/languages_doc.rb">app/controllers/concerns/languages_doc.rb</a></td>
        <td class="red strong">0.0 %</td>
        <td>41</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#749fd352f6c18aba0d3e8cfba62b2f10d361c48e" class="src_link" title="app/helpers/application_helper.rb">app/helpers/application_helper.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>2</td>
        <td>1</td>
        <td>1</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c44403bd2c673d999d4bcd1ef308ef37f08777ff" class="src_link" title="app/models/api_key.rb">app/models/api_key.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>21</td>
        <td>12</td>
        <td>12</td>
        <td>0</td>
        <td>13.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#4137b353539a67a540e2c731bccea2d2d504b821" class="src_link" title="lib/api_constraints.rb">lib/api_constraints.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>14</td>
        <td>8</td>
        <td>8</td>
        <td>0</td>
        <td>28.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#dbe9620c65cc79ad8322d627821985d92cd64028" class="src_link" title="lib/error_codes.rb">lib/error_codes.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>14</td>
        <td>12</td>
        <td>12</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d58552e7b14435ae189e7105ece525820a8144a9" class="src_link" title="lib/mlg_elastic_search.rb">lib/mlg_elastic_search.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>323</td>
        <td>112</td>
        <td>112</td>
        <td>0</td>
        <td>14.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#813d95b38a1f9b4133105e77f982cc919f7328e8" class="src_link" title="lib/sample_data.rb">lib/sample_data.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>20</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>10.2</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
          <div class="file_list_container" id="Controllers">
  <h2>
    <span class="group_name">Controllers</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         33.22
       </span>
    </span> hits/line)
  </h2>
  <a name="Controllers"></a>
  <div>
    <b>8</b> files in total.
    <b>184</b> relevant lines. 
    <span class="green"><b>184</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#cb3bb5bb0c978c0cab476b294ff1e33bc75bd0e0" class="src_link" title="app/controllers/api/v1/base_api_controller.rb">app/controllers/api/v1/base_api_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>101</td>
        <td>41</td>
        <td>41</td>
        <td>0</td>
        <td>94.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#853a207de94c1a5d4c37d45a54c829ff9c2c1011" class="src_link" title="app/controllers/api/v1/dictionary_controller.rb">app/controllers/api/v1/dictionary_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>158</td>
        <td>88</td>
        <td>88</td>
        <td>0</td>
        <td>23.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e0bca53619c98da3ba0a8baab5ff6cc097763ddf" class="src_link" title="app/controllers/api/v1/glossary_controller.rb">app/controllers/api/v1/glossary_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>52</td>
        <td>29</td>
        <td>29</td>
        <td>0</td>
        <td>4.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6b6b2785cfd9995a483950d816da10673299b8b6" class="src_link" title="app/controllers/api/v1/languages_controller.rb">app/controllers/api/v1/languages_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>41</td>
        <td>23</td>
        <td>23</td>
        <td>0</td>
        <td>3.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ee64efe3a50deaf81fbe5e80786f8e626dd272f1" class="src_link" title="app/controllers/application_controller.rb">app/controllers/application_controller.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>4</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#7dab2c34e958caacafb0df83766ed364ba0db973" class="src_link" title="app/controllers/concerns/dictionary_doc.rb">app/controllers/concerns/dictionary_doc.rb</a></td>
        <td class="red strong">0.0 %</td>
        <td>24</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0d9c18355c2eee128ec2d4a87b7923e2035209ff" class="src_link" title="app/controllers/concerns/glossary_doc.rb">app/controllers/concerns/glossary_doc.rb</a></td>
        <td class="red strong">0.0 %</td>
        <td>55</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e7d24d97b2e7702b2ba067ffd437a82e7b1bd188" class="src_link" title="app/controllers/concerns/languages_doc.rb">app/controllers/concerns/languages_doc.rb</a></td>
        <td class="red strong">0.0 %</td>
        <td>41</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0.0</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Models">
  <h2>
    <span class="group_name">Models</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         13.8
       </span>
    </span> hits/line)
  </h2>
  <a name="Models"></a>
  <div>
    <b>1</b> files in total.
    <b>12</b> relevant lines. 
    <span class="green"><b>12</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#c44403bd2c673d999d4bcd1ef308ef37f08777ff" class="src_link" title="app/models/api_key.rb">app/models/api_key.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>21</td>
        <td>12</td>
        <td>12</td>
        <td>0</td>
        <td>13.8</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Mailers">
  <h2>
    <span class="group_name">Mailers</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Mailers"></a>
  <div>
    <b>0</b> files in total.
    <b>0.0</b> relevant lines. 
    <span class="green"><b>0.0</b> lines covered</span> and
    <span class="red"><b>0.0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Helpers">
  <h2>
    <span class="group_name">Helpers</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="yellow">
         1.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Helpers"></a>
  <div>
    <b>1</b> files in total.
    <b>1</b> relevant lines. 
    <span class="green"><b>1</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#749fd352f6c18aba0d3e8cfba62b2f10d361c48e" class="src_link" title="app/helpers/application_helper.rb">app/helpers/application_helper.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>2</td>
        <td>1</td>
        <td>1</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
          <div class="file_list_container" id="Libraries">
  <h2>
    <span class="group_name">Libraries</span>
    (<span class="covered_percent"><span class="green">100.0%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         14.0
       </span>
    </span> hits/line)
  </h2>
  <a name="Libraries"></a>
  <div>
    <b>4</b> files in total.
    <b>141</b> relevant lines. 
    <span class="green"><b>141</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#4137b353539a67a540e2c731bccea2d2d504b821" class="src_link" title="lib/api_constraints.rb">lib/api_constraints.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>14</td>
        <td>8</td>
        <td>8</td>
        <td>0</td>
        <td>28.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#dbe9620c65cc79ad8322d627821985d92cd64028" class="src_link" title="lib/error_codes.rb">lib/error_codes.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>14</td>
        <td>12</td>
        <td>12</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d58552e7b14435ae189e7105ece525820a8144a9" class="src_link" title="lib/mlg_elastic_search.rb">lib/mlg_elastic_search.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>323</td>
        <td>112</td>
        <td>112</td>
        <td>0</td>
        <td>14.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#813d95b38a1f9b4133105e77f982cc919f7328e8" class="src_link" title="lib/sample_data.rb">lib/sample_data.rb</a></td>
        <td class="green strong">100.0 %</td>
        <td>20</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>10.2</td>
      </tr>
      
    </tbody>
  </table>
</div>

        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.10.0 
        and simplecov-html v0.10.0<br/>
        using MiniTest
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="cb3bb5bb0c978c0cab476b294ff1e33bc75bd0e0">
  <div class="header">
    <h3>app/controllers/api/v1/base_api_controller.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>41</b> relevant lines. 
      <span class="green"><b>41</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;error_codes&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">module Api</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">  module V1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    class BaseApiController &lt; ApplicationController</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">      before_filter :remove_empty_params_and_headers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">      before_filter :set_custom_response_headers</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">      before_filter :authenticate_from_token!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">      # Verify payload for webhook methods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">      # before_filter :verify_payload!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">      respond_to :json</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      def authenticate_from_token!</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="17">
          <span class="hits">64</span>
          
          <code class="ruby">        authenticate_or_request_with_http_token do |token, options|</code>
        </li>
      
        <li class="covered" data-hits="59" data-linenumber="18">
          <span class="hits">59</span>
          
          <code class="ruby">          ApiKey.where(access_token: token).where(&#39;expire_at &gt; ?&#39;, Time.now).exists?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">      def verify_payload!</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="23">
          <span class="hits">3</span>
          
          <code class="ruby">        begin</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="24">
          <span class="hits">3</span>
          
          <code class="ruby">          payload = request.raw_post</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="25">
          <span class="hits">3</span>
          
          <code class="ruby">          if verify_signature(payload)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">            @payload = JSON.parse(payload)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">          else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">            render_unauthorized and return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">        rescue Exception =&gt; e</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">          render_error(e.message, &#39;UNKNOWN&#39;) and return</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">      def verify_signature(payload)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="36">
          <span class="hits">3</span>
          
          <code class="ruby">        signature = &#39;sha1=&#39; + OpenSSL::HMAC.hexdigest(OpenSSL::Digest.new(&#39;sha1&#39;), CONFIG[&#39;secret_token&#39;].to_s, payload)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">        Rack::Utils.secure_compare(signature, request.headers[&#39;X-Signature&#39;].to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">      def get_params</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="41">
          <span class="hits">7</span>
          
          <code class="ruby">        params.reject{ |k, v| [&#39;id&#39;, &#39;action&#39;, &#39;controller&#39;, &#39;format&#39;].include?(k) }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">      def remove_empty_params_and_headers</code>
        </li>
      
        <li class="covered" data-hits="273" data-linenumber="45">
          <span class="hits">273</span>
          
          <code class="ruby">        params.reject!{ |k, v| v.blank? }</code>
        </li>
      
        <li class="covered" data-hits="3149" data-linenumber="46">
          <span class="hits">3149</span>
          
          <code class="ruby">        request.headers.each{ |k, v| request.headers[k] = nil if (k =~ /HTTP_/).present? &amp;&amp; v.blank? }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">      def set_custom_response_headers</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="50">
          <span class="hits">67</span>
          
          <code class="ruby">        response.headers[&#39;X-Build&#39;] = BUILD</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="51">
          <span class="hits">67</span>
          
          <code class="ruby">        response.headers[&#39;Accept&#39;] ||= ApiConstraints.accept(1)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">      # Renderization methods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">      def render_success(type = &#39;success&#39;, object = nil)</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="57">
          <span class="hits">36</span>
          
          <code class="ruby">        json = { type: type }</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="58">
          <span class="hits">36</span>
          
          <code class="ruby">        json[:data] = object unless object.nil?</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="59">
          <span class="hits">36</span>
          
          <code class="ruby">        render json: json, status: 200</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">      def render_error(message, code, status = 400)</code>
        </li>
      
        <li class="covered" data-hits="25" data-linenumber="63">
          <span class="hits">25</span>
          
          <code class="ruby">        render json: { type: &#39;error&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">                       data: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">                         message: message,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">                         code: LapisConstants::ErrorCodes::const_get(code)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">                       }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">                     },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">                     status: status</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">      def render_unauthorized</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">        render_error &#39;Unauthorized&#39;, &#39;UNAUTHORIZED&#39;, 401</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">      # def render_unknown_error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">      #   render_error &#39;Unknown error&#39;, &#39;UNKNOWN&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">      # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">      # def render_invalid</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">      #   render_error &#39;Invalid value&#39;, &#39;INVALID_VALUE&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">      # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">       def render_parameters_missing</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="85">
          <span class="hits">17</span>
          
          <code class="ruby">         render_error &#39;Parameters missing&#39;, &#39;MISSING_PARAMETERS&#39;, 400</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      # def render_not_found</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">      #   render_error &#39;Id not found&#39;, &#39;ID_NOT_FOUND&#39;, 404</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">      # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">      # def render_not_implemented</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">      #   render json: { success: true, message: &#39;TODO&#39; }, status: 200</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">      # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">      # def render_deleted</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">      #   render_error &#39;This object was deleted&#39;, &#39;ID_NOT_FOUND&#39;, 410</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">      # end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="853a207de94c1a5d4c37d45a54c829ff9c2c1011">
  <div class="header">
    <h3>app/controllers/api/v1/dictionary_controller.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>88</b> relevant lines. 
      <span class="green"><b>88</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#encoding: utf-8 </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require &quot;net/http&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;json&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;mlg_elastic_search&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;retriable&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">KEY = CONFIG[&#39;babelfy_key&#39;] </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">LANGCODES = CONFIG[&#39;langcodes&#39;] </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">class Api::V1::DictionaryController &lt; Api::V1::BaseApiController</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  include DictionaryDoc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  def terms</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="16">
          <span class="hits">7</span>
          
          <code class="ruby">    if params[:language].blank? or params[:text].blank?</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="17">
          <span class="hits">3</span>
          
          <code class="ruby">      render_parameters_missing</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="18">
          <span class="hits">4</span>
          
          <code class="ruby">    elsif params[:language].length != 2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">      render_error(&#39;Language must be in 2-letters format&#39;, &#39;INVALID_VALUE&#39;, 400)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="21">
          <span class="hits">3</span>
          
          <code class="ruby">      client = Elasticsearch::Client.new log: true, url: ES_SERVER</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="22">
          <span class="hits">3</span>
          
          <code class="ruby">      data = { lang: params[:language], term: params[:text], context: { source_id: params[:source_id].to_s } }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="24">
          <span class="hits">3</span>
          
          <code class="ruby">      @dictionary = Mlg::ElasticSearch.get_glossary(data.to_json)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="25">
          <span class="hits">3</span>
          
          <code class="ruby">      @babelfy_requested = false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="27">
          <span class="hits">3</span>
          
          <code class="ruby">      if @dictionary.empty?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="28">
          <span class="hits">2</span>
          
          <code class="ruby">        request_terms</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">        @babelfy_requested = true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">        @dictionary = Mlg::ElasticSearch.get_glossary(data.to_json)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="33">
          <span class="hits">3</span>
          
          <code class="ruby">      render_success &#39;term&#39;, @dictionary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    end    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">  private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">  def request_terms</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="40">
          <span class="hits">2</span>
          
          <code class="ruby">    text = params[:text].to_s</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">    codesource = params[:language].to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">    uri = URI(&quot;https://babelfy.io/v1/disambiguate?&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    #segments have three attributes: text, language and offset</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="47">
          <span class="hits">2</span>
          
          <code class="ruby">    params = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">      :text =&gt; text,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      :lang  =&gt; codesource,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">      :key  =&gt; KEY</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">    uri.query = URI.encode_www_form(params)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="55">
          <span class="hits">2</span>
          
          <code class="ruby">    http = Net::HTTP.new(uri.host, uri.port)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">    http.use_ssl = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="58">
          <span class="hits">2</span>
          
          <code class="ruby">    Retriable.retriable do  </code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="59">
          <span class="hits">2</span>
          
          <code class="ruby">      response = http.request(Net::HTTP::Get.new(uri.request_uri))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="61">
          <span class="hits">2</span>
          
          <code class="ruby">      if response.is_a?(Net::HTTPSuccess)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">        json = JSON.parse(response.body)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="64">
          <span class="hits">2</span>
          
          <code class="ruby">        json.each do |annotation|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="66">
          <span class="hits">6</span>
          
          <code class="ruby">          sourceterm = text[annotation[&quot;charFragment&quot;][&quot;start&quot;]..annotation[&quot;charFragment&quot;][&quot;end&quot;]+1]</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="67">
          <span class="hits">6</span>
          
          <code class="ruby">          sourcedefinition= &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="68">
          <span class="hits">6</span>
          
          <code class="ruby">          translations = []</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="69">
          <span class="hits">6</span>
          
          <code class="ruby">          LANGCODES.each do |lang|</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="70">
          <span class="hits">60</span>
          
          <code class="ruby">            by = GetSynset(annotation[&#39;babelSynsetID&#39;], lang)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="71">
          <span class="hits">60</span>
          
          <code class="ruby">            bs = GetMainSense(by,lang) </code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="72">
          <span class="hits">60</span>
          
          <code class="ruby">            definition  = term = &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="73">
          <span class="hits">60</span>
          
          <code class="ruby">            if bs.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="74">
          <span class="hits">58</span>
          
          <code class="ruby">              term = bs[&quot;simpleLemma&quot;]</code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="75">
          <span class="hits">58</span>
          
          <code class="ruby">              g = GetMainGloss(by,lang) </code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="76">
          <span class="hits">58</span>
          
          <code class="ruby">              if g.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="77">
          <span class="hits">38</span>
          
          <code class="ruby">                definition = g[&quot;gloss&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">            # Source</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="83">
          <span class="hits">60</span>
          
          <code class="ruby">            if (lang.upcase  == codesource.upcase ) </code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="84">
          <span class="hits">6</span>
          
          <code class="ruby">              sourcedefinition = definition;    </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">            elsif term.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="86">
          <span class="hits">52</span>
          
          <code class="ruby">              translation = {}</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="87">
          <span class="hits">52</span>
          
          <code class="ruby">              translation[&quot;lang&quot;] = lang.downcase </code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="88">
          <span class="hits">52</span>
          
          <code class="ruby">              translation[&quot;definition&quot;] = definition</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="89">
          <span class="hits">52</span>
          
          <code class="ruby">              translation[&quot;term&quot;] = term</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="90">
          <span class="hits">52</span>
          
          <code class="ruby">              if (term != &quot;&quot;)</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="91">
          <span class="hits">52</span>
          
          <code class="ruby">                translations &lt;&lt; translation</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">              end  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="96">
          <span class="hits">6</span>
          
          <code class="ruby">          retES = false</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="97">
          <span class="hits">6</span>
          
          <code class="ruby">          if sourcedefinition.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="98">
          <span class="hits">6</span>
          
          <code class="ruby">            payload = &quot;&quot;</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="99">
          <span class="hits">6</span>
          
          <code class="ruby">            payload = generatePayload(codesource.downcase, sourceterm, sourcedefinition, translations)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="100">
          <span class="hits">6</span>
          
          <code class="ruby">            retES = Mlg::ElasticSearch.add_glossary(payload)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="107">
          <span class="hits">1</span>
          
          <code class="ruby">  def GetSynset(id, lang)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="108">
          <span class="hits">60</span>
          
          <code class="ruby">    uri = URI(&quot;https://babelnet.io/v2/getSynset?&quot;)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="109">
          <span class="hits">60</span>
          
          <code class="ruby">    json = {}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="111">
          <span class="hits">60</span>
          
          <code class="ruby">    params = {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">      :id =&gt; id,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">      :key  =&gt; KEY,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">      :filterLangs =&gt; lang</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">    }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="117">
          <span class="hits">60</span>
          
          <code class="ruby">    uri.query = URI.encode_www_form(params)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="119">
          <span class="hits">60</span>
          
          <code class="ruby">    http = Net::HTTP.new(uri.host, uri.port)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="120">
          <span class="hits">60</span>
          
          <code class="ruby">    http.use_ssl = true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="122">
          <span class="hits">60</span>
          
          <code class="ruby">    Retriable.retriable do  </code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="123">
          <span class="hits">60</span>
          
          <code class="ruby">      response = http.request(Net::HTTP::Get.new(uri.request_uri))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="125">
          <span class="hits">60</span>
          
          <code class="ruby">      if response.is_a?(Net::HTTPSuccess)</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="126">
          <span class="hits">60</span>
          
          <code class="ruby">        json = JSON.parse(response.body)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="129">
          <span class="hits">60</span>
          
          <code class="ruby">    return json</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">  #return the first sense in the language as main</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="134">
          <span class="hits">1</span>
          
          <code class="ruby">  def GetMainSense(by,lang) </code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="135">
          <span class="hits">60</span>
          
          <code class="ruby">    by[&#39;senses&#39;] ||= []</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="136">
          <span class="hits">60</span>
          
          <code class="ruby">    by[&#39;senses&#39;].each do |entry|</code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="137">
          <span class="hits">58</span>
          
          <code class="ruby">      if entry[&#39;language&#39;] == lang</code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="138">
          <span class="hits">58</span>
          
          <code class="ruby">        return entry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="143">
          <span class="hits">1</span>
          
          <code class="ruby">  def GetMainGloss(by,lang)</code>
        </li>
      
        <li class="covered" data-hits="58" data-linenumber="144">
          <span class="hits">58</span>
          
          <code class="ruby">    by[&#39;glosses&#39;].each do |entry|</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="145">
          <span class="hits">38</span>
          
          <code class="ruby">      if entry[&#39;language&#39;] == lang</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="146">
          <span class="hits">38</span>
          
          <code class="ruby">        return entry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="151">
          <span class="hits">1</span>
          
          <code class="ruby">  def generatePayload(codesource, sourceterm, sourcedefinition, translations)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="152">
          <span class="hits">6</span>
          
          <code class="ruby">    contextStr =  { &#39;data_source&#39; =&gt; &#39;dictionary&#39; }</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="153">
          <span class="hits">6</span>
          
          <code class="ruby">    contextStr[&#39;source_id&#39;] = params[:source_id] unless params[:source_id].blank?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="154">
          <span class="hits">6</span>
          
          <code class="ruby">    strTranslations = translations.to_s.gsub(&quot;=&gt;&quot;,&quot;:&quot;)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="155">
          <span class="hits">6</span>
          
          <code class="ruby">    strJson = &#39;{&quot;term&quot;: &quot;&#39;+sourceterm+&#39;&quot;, &quot;lang&quot;: &quot;&#39;+codesource+&#39;&quot;, &quot;definition&quot;: &quot;&#39;+sourcedefinition+&#39;&quot;,&quot;translations&quot;: &#39;+strTranslations+&#39;,&quot;context&quot;:&#39;+contextStr.to_json+&#39;}&#39;</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="156">
          <span class="hits">6</span>
          
          <code class="ruby">    return strJson</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="e0bca53619c98da3ba0a8baab5ff6cc097763ddf">
  <div class="header">
    <h3>app/controllers/api/v1/glossary_controller.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>29</b> relevant lines. 
      <span class="green"><b>29</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#encoding: utf-8 </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;mlg_elastic_search&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">class Api::V1::GlossaryController &lt; Api::V1::BaseApiController</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">  include GlossaryDoc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  GLOSSARY_INDEX = CONFIG[&#39;glossary_index&#39;] </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  GLOSSARY_TYPE  = CONFIG[&#39;glossary_type&#39;] </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  ES_SERVER = CONFIG[&#39;elasticsearch_server&#39;].to_s + &#39;:&#39; + CONFIG[&#39;elasticsearch_port&#39;].to_s</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  LANG_WITH_ANALYZER = CONFIG[&#39;lang_with_analyzer&#39;]  #languages with stem and stop analyzers in elasticsearch index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  def term # POST</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="14">
          <span class="hits">11</span>
          
          <code class="ruby">    if params[:data].blank?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">      render_parameters_missing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="17">
          <span class="hits">9</span>
          
          <code class="ruby">      str = params[:data].to_s</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="18">
          <span class="hits">9</span>
          
          <code class="ruby">      retES = Mlg::ElasticSearch.add_glossary(params[:data].to_s)</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="19">
          <span class="hits">9</span>
          
          <code class="ruby">      if retES</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="20">
          <span class="hits">5</span>
          
          <code class="ruby">        render_success &#39;success&#39;, true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="22">
          <span class="hits">4</span>
          
          <code class="ruby">        render_error(&quot;ES Error&quot;, &#39;MISSING_PARAMETERS&#39;, status = 400)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">  def terms # GET</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="28">
          <span class="hits">13</span>
          
          <code class="ruby">    if params[:data].blank?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">      render_parameters_missing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="31">
          <span class="hits">11</span>
          
          <code class="ruby">      client = Elasticsearch::Client.new log: true, url: ES_SERVER</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="33">
          <span class="hits">11</span>
          
          <code class="ruby">      @glossary = Mlg::ElasticSearch.get_glossary(params[:data].to_s)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">      </code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="35">
          <span class="hits">10</span>
          
          <code class="ruby">      render_success &#39;term&#39;, @glossary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">  def delete # DELETE</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="40">
          <span class="hits">8</span>
          
          <code class="ruby">    if params[:id].blank?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">      render_parameters_missing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="43">
          <span class="hits">6</span>
          
          <code class="ruby">      ret = false</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="44">
          <span class="hits">6</span>
          
          <code class="ruby">      ret = Mlg::ElasticSearch.delete_glossary(params[:id].to_s)</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="45">
          <span class="hits">6</span>
          
          <code class="ruby">      if ret</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="46">
          <span class="hits">5</span>
          
          <code class="ruby">        render_success &#39;delete&#39;, true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">        render_error(&#39;Could not delete&#39;, &#39;INVALID_VALUE&#39;, status = 400)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="6b6b2785cfd9995a483950d816da10673299b8b6">
  <div class="header">
    <h3>app/controllers/api/v1/languages_controller.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>23</b> relevant lines. 
      <span class="green"><b>23</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#encoding: utf-8 </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;rubypython&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;retriable&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">class Api::V1::LanguagesController &lt; Api::V1::BaseApiController</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  include LanguagesDoc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  def identification</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="10">
          <span class="hits">10</span>
          
          <code class="ruby">    if params[:text].blank?</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">      render_parameters_missing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="13">
          <span class="hits">8</span>
          
          <code class="ruby">	Retriable.retriable do</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="14">
          <span class="hits">8</span>
          
          <code class="ruby">	    	str = params[:text].to_s</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="15">
          <span class="hits">8</span>
          
          <code class="ruby">	    	@language =  DYSL.classifyReturnAll(str,STOPWORDS_PATH).rubify</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="16">
          <span class="hits">8</span>
          
          <code class="ruby">	    	render_success &#39;language&#39;, @language</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">	end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  def sample</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="22">
          <span class="hits">7</span>
          
          <code class="ruby">    if params[:text].blank? or params[:language].blank?</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="23">
          <span class="hits">6</span>
          
          <code class="ruby">      render_parameters_missing</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">	Retriable.retriable do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">	    	str = params[:text].to_s</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">	    	lang = params[:language].to_s</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">	    	@ret = DYSL.add_sample(str, lang, MODEL_FILE).rubify</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">	    	render_success &#39;success&#39;, @ret</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">	end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">  def language</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">	Retriable.retriable do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">	  	@list =  DYSL.listLanguages().rubify</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">	  	render_success &#39;language&#39;, @list</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">	end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="ee64efe3a50deaf81fbe5e80786f8e626dd272f1">
  <div class="header">
    <h3>app/controllers/application_controller.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>3</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">class ApplicationController &lt; ActionController::Base</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  protect_from_forgery with: :exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  skip_before_filter  :verify_authenticity_token</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="7dab2c34e958caacafb0df83766ed364ba0db973">
  <div class="header">
    <h3>app/controllers/concerns/dictionary_doc.rb</h3>
    <h4><span class="red">0.0 %</span> covered</h4>
    <div>
      <b>0</b> relevant lines. 
      <span class="green"><b>0</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#encoding: utf-8 </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"># :nocov:</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="3">
          
          <span class="hits">skipped</span>
          <code class="ruby">module DictionaryDoc</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="4">
          
          <span class="hits">skipped</span>
          <code class="ruby">  extend ActiveSupport::Concern</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="5">
          
          <span class="hits">skipped</span>
          <code class="ruby"> </code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="6">
          
          <span class="hits">skipped</span>
          <code class="ruby">  included do</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="7">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_controller :dictionary, &#39;Dictionary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="8">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="9">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_api :terms do</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="10">
          
          <span class="hits">skipped</span>
          <code class="ruby">      summary &#39;Get dictionary terms (from Babelfy for the first time, then from ElasticSearch) for a text in a certain language&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="11">
          
          <span class="hits">skipped</span>
          <code class="ruby">      notes &#39;Get dictionary terms (from Babelfy for the first time, then from ElasticSearch) for a text in a certain language&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="12">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :text, :string, :required, &#39;Text to be searched&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="13">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :language, :string, :required, &#39;Source language of the text&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="14">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :source_id, :string, :optional, &#39;An identifier of the input text (e.g., a post ID on Bridge)&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="15">
          
          <span class="hits">skipped</span>
          <code class="ruby">      authed = { &#39;Authorization&#39; =&gt; &#39;Token token=&quot;test&quot;&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="16">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response :ok, &#39;Terms from the dictionary&#39;, { query: { text: &#39;The book is on the table&#39;, language: &#39;en&#39;, source_id: &#39;x&#39; }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="17">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 400, &#39;Missing parameters&#39;, { query: nil, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="18">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 400, &#39;Invalid language format&#39;, { query: { text: &#39;Test&#39;, language: &#39;en_US&#39;, source_id: &#39;x&#39; }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="19">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 401, &#39;Access denied&#39;, { query: { text: &#39;Test&#39;, language: &#39;en&#39;, source_id: &#39;x&#39; } }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="20">
          
          <span class="hits">skipped</span>
          <code class="ruby">    end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="21">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="22">
          
          <span class="hits">skipped</span>
          <code class="ruby">  end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="23">
          
          <span class="hits">skipped</span>
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"># :nocov:</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="0d9c18355c2eee128ec2d4a87b7923e2035209ff">
  <div class="header">
    <h3>app/controllers/concerns/glossary_doc.rb</h3>
    <h4><span class="red">0.0 %</span> covered</h4>
    <div>
      <b>0</b> relevant lines. 
      <span class="green"><b>0</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#encoding: utf-8 </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"># :nocov:</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="3">
          
          <span class="hits">skipped</span>
          <code class="ruby">module GlossaryDoc</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="4">
          
          <span class="hits">skipped</span>
          <code class="ruby">  extend ActiveSupport::Concern</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="5">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="6">
          
          <span class="hits">skipped</span>
          <code class="ruby">  TERM = {</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="7">
          
          <span class="hits">skipped</span>
          <code class="ruby">    term: &#39;Test&#39;,</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="8">
          
          <span class="hits">skipped</span>
          <code class="ruby">    lang: &#39;en&#39;, </code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="9">
          
          <span class="hits">skipped</span>
          <code class="ruby">    definition: &#39;An experiment&#39;,</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="10">
          
          <span class="hits">skipped</span>
          <code class="ruby">    translations: [</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="11">
          
          <span class="hits">skipped</span>
          <code class="ruby">      { lang: &#39;pt&#39;, definition: &#39;Um experimento&#39;, term: &#39;Teste&#39; },</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="12">
          
          <span class="hits">skipped</span>
          <code class="ruby">      { lang: &#39;es&#39;, definition: &#39;Un experimento&#39;, term: &#39;Teste&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="13">
          
          <span class="hits">skipped</span>
          <code class="ruby">    ],</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="14">
          
          <span class="hits">skipped</span>
          <code class="ruby">    context: { page_id: &#39;foo&#39;, &#39;data_source&#39; =&gt; &#39;glossary&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="15">
          
          <span class="hits">skipped</span>
          <code class="ruby">  }.to_json</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="16">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="17">
          
          <span class="hits">skipped</span>
          <code class="ruby">  TERM_ID = &#39;2c94a1c8dc37c8c90338739f3c779c28&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="18">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="19">
          
          <span class="hits">skipped</span>
          <code class="ruby">  TERM_QUERY = { lang: &#39;en&#39;, term: &#39;This is just a test&#39;, context: { page_id: &#39;foo&#39; } }.to_json</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="20">
          
          <span class="hits">skipped</span>
          <code class="ruby"> </code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="21">
          
          <span class="hits">skipped</span>
          <code class="ruby">  included do</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="22">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_controller :glossary, &#39;Glossary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="23">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="24">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_api :term do</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="25">
          
          <span class="hits">skipped</span>
          <code class="ruby">      summary &#39;Add term to the glossary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="26">
          
          <span class="hits">skipped</span>
          <code class="ruby">      notes &#39;Use this method in order to add a new term to the glossary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="27">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :data, :string, :required, &#39;JSON string that represents the term&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="28">
          
          <span class="hits">skipped</span>
          <code class="ruby">      authed = { &#39;Authorization&#39; =&gt; &#39;Token token=&quot;test&quot;&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="29">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response :ok, &#39;Term was added successfully&#39;, { query: { data: TERM }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="30">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 400, &#39;Missing parameters&#39;, { query: { }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="31">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 401, &#39;Access denied&#39;, { query: { data: TERM } }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="32">
          
          <span class="hits">skipped</span>
          <code class="ruby">    end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="33">
          
          <span class="hits">skipped</span>
          <code class="ruby">    </code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="34">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_api :terms do</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="35">
          
          <span class="hits">skipped</span>
          <code class="ruby">      summary &#39;Get terms from a post&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="36">
          
          <span class="hits">skipped</span>
          <code class="ruby">      notes &#39;Use this method in order to get terms from glossary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="37">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :data, :string, :required, &#39;JSON string that represents the input text&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="38">
          
          <span class="hits">skipped</span>
          <code class="ruby">      authed = { &#39;Authorization&#39; =&gt; &#39;Token token=&quot;test&quot;&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="39">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response :ok, &#39;Terms from the glossary for the given input&#39;, { query: { data: TERM_QUERY }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="40">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 400, &#39;Missing parameters&#39;, { query: { }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="41">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 401, &#39;Access denied&#39;, { query: { data: TERM_QUERY } }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="42">
          
          <span class="hits">skipped</span>
          <code class="ruby">    end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="43">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="44">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_api :delete do</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="45">
          
          <span class="hits">skipped</span>
          <code class="ruby">      summary &#39;Delete term from the glossary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="46">
          
          <span class="hits">skipped</span>
          <code class="ruby">      notes &#39;Use this method in order to delete a term from the glossary&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="47">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :id, :string, :required, &#39;The term ID as assigned by ElasticSearch&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="48">
          
          <span class="hits">skipped</span>
          <code class="ruby">      authed = { &#39;Authorization&#39; =&gt; &#39;Token token=&quot;test&quot;&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="49">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response :ok, &#39;Terms from the glossary for the given input&#39;, { query: { id: TERM_ID }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="50">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 400, &#39;Missing parameters&#39;, { query: { }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="51">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 401, &#39;Access denied&#39;, { query: { id: TERM_ID } }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="52">
          
          <span class="hits">skipped</span>
          <code class="ruby">    end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="53">
          
          <span class="hits">skipped</span>
          <code class="ruby">  end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="54">
          
          <span class="hits">skipped</span>
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby"># :nocov:</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="e7d24d97b2e7702b2ba067ffd437a82e7b1bd188">
  <div class="header">
    <h3>app/controllers/concerns/languages_doc.rb</h3>
    <h4><span class="red">0.0 %</span> covered</h4>
    <div>
      <b>0</b> relevant lines. 
      <span class="green"><b>0</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#encoding: utf-8 </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"># :nocov:</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="3">
          
          <span class="hits">skipped</span>
          <code class="ruby">module LanguagesDoc</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="4">
          
          <span class="hits">skipped</span>
          <code class="ruby">  extend ActiveSupport::Concern</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="5">
          
          <span class="hits">skipped</span>
          <code class="ruby"> </code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="6">
          
          <span class="hits">skipped</span>
          <code class="ruby">  included do</code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="7">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_controller :languages, &#39;Languages&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="8">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="1" data-linenumber="9">
          
          <span class="hits">skipped</span>
          <code class="ruby">    swagger_api :identification do</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="10">
          
          <span class="hits">skipped</span>
          <code class="ruby">      summary &#39;Identify the language of a given text&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="11">
          
          <span class="hits">skipped</span>
          <code class="ruby">      notes &#39;Use this method in order to identify the language of a given text&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="12">
          
          <span class="hits">skipped</span>
          <code class="ruby">      param :query, :text, :string, :required, &#39;Text to be classified&#39;</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="13">
          
          <span class="hits">skipped</span>
          <code class="ruby">      authed = { &#39;Authorization&#39; =&gt; &#39;Token token=&quot;test&quot;&#39; }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="14">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response :ok, &#39;Text language&#39;, { query: { text: &#39;The book is on the table&#39; }, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="15">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 400, &#39;Parameter &quot;text&quot; is missing&#39;, { query: nil, headers: authed }</code>
        </li>
      
        <li class="skipped" data-hits="0" data-linenumber="16">
          
          <span class="hits">skipped</span>
          <code class="ruby">      response 401, &#39;Access denied&#39;, { query: { text: &#39;Test&#39; } }</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="17">
          
          <span class="hits">skipped</span>
          <code class="ruby">    end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="18">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="19">
          
          <span class="hits">skipped</span>
          <code class="ruby">    # Not used right now</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="20">
          
          <span class="hits">skipped</span>
          <code class="ruby">    # swagger_api :sample do</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="21">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   summary &#39;Add training sample to the model&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="22">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   notes &#39;Use this method in order to add training sample to the model&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="23">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   param :query, :language, :string, :required, &#39;Language&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="24">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   param :query, :text, :string, :required, &#39;Text to be inserted&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="25">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   response :ok, &#39;Returns ok&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="26">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   response 400, &#39;Parameters missing (text was not provided)&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="27">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   response 401, &#39;Access denied&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="28">
          
          <span class="hits">skipped</span>
          <code class="ruby">    # end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="29">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="30">
          
          <span class="hits">skipped</span>
          <code class="ruby">    # Not used right now</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="31">
          
          <span class="hits">skipped</span>
          <code class="ruby">    # swagger_api :language do</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="32">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   summary &#39;List supported languages&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="33">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   notes &#39;Use this method in order to list supported languages&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="34">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   response :ok, &#39;Returns list&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="35">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   response 400, &#39;Parameters missing (text was not provided)&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="36">
          
          <span class="hits">skipped</span>
          <code class="ruby">    #   response 401, &#39;Access denied&#39;</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="37">
          
          <span class="hits">skipped</span>
          <code class="ruby">    # end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="38">
          
          <span class="hits">skipped</span>
          <code class="ruby"></code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="39">
          
          <span class="hits">skipped</span>
          <code class="ruby">  end</code>
        </li>
      
        <li class="skipped" data-hits="" data-linenumber="40">
          
          <span class="hits">skipped</span>
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"># :nocov:</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="749fd352f6c18aba0d3e8cfba62b2f10d361c48e">
  <div class="header">
    <h3>app/helpers/application_helper.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>1</b> relevant lines. 
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module ApplicationHelper</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="c44403bd2c673d999d4bcd1ef308ef37f08777ff">
  <div class="header">
    <h3>app/models/api_key.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>12</b> relevant lines. 
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">class ApiKey &lt; ActiveRecord::Base</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  validates_presence_of :access_token, :expire_at</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">  validates_uniqueness_of :access_token</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">  before_validation :generate_access_token, on: :create</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">  before_validation :calculate_expiration_date, on: :create</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  attr_accessible</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  private</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  def generate_access_token</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">    begin</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="14">
          <span class="hits">52</span>
          
          <code class="ruby">      self.access_token = SecureRandom.hex</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="15">
          <span class="hits">52</span>
          
          <code class="ruby">    end while ApiKey.where(access_token: access_token).exists?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">  def calculate_expiration_date</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="19">
          <span class="hits">52</span>
          
          <code class="ruby">    self.expire_at = Time.now.since(30.days)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="4137b353539a67a540e2c731bccea2d2d504b821">
  <div class="header">
    <h3>lib/api_constraints.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>8</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">class ApiConstraints</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  def initialize(options)</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="3">
          <span class="hits">76</span>
          
          <code class="ruby">    @version = options[:version]</code>
        </li>
      
        <li class="covered" data-hits="76" data-linenumber="4">
          <span class="hits">76</span>
          
          <code class="ruby">    @default = options[:default]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  def matches?(req)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    @default || req.headers[&#39;Accept&#39;].include?(ApiConstraints.accept(@version))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.accept(version = 1)</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="12">
          <span class="hits">67</span>
          
          <code class="ruby">    &quot;application/vnd.lapis.v#{version}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="dbe9620c65cc79ad8322d627821985d92cd64028">
  <div class="header">
    <h3>lib/error_codes.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>12</b> relevant lines. 
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module LapisConstants</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  class ErrorCodes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">    UNAUTHORIZED = 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">    MISSING_PARAMETERS = 2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">    ID_NOT_FOUND = 3</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">    INVALID_VALUE = 4</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">    UNKNOWN = 5</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">    AUTH = 6</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">    WARNING = 7</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    MISSING_OBJECT = 8</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">    DUPLICATED = 9</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">    ALL = %w(UNAUTHORIZED MISSING_PARAMETERS ID_NOT_FOUND INVALID_VALUE UNKNOWN AUTH WARNING MISSING_OBJECT DUPLICATED)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="d58552e7b14435ae189e7105ece525820a8144a9">
  <div class="header">
    <h3>lib/mlg_elastic_search.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>112</b> relevant lines. 
      <span class="green"><b>112</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;rubypython&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;json&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;elasticsearch&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">GLOSSARY_INDEX = CONFIG[&#39;glossary_index&#39;] </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">GLOSSARY_TYPE  = CONFIG[&#39;glossary_type&#39;] </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">ES_SERVER = CONFIG[&#39;elasticsearch_server&#39;].to_s + &#39;:&#39; + CONFIG[&#39;elasticsearch_port&#39;].to_s</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">LANG_WITH_ANALYZER = CONFIG[&#39;lang_with_analyzer&#39;]  #languages with stem and stop analyzers in elasticsearch index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">module Mlg</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">   class ElasticSearch</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.delete_glossary (_id) #POST</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="15">
          <span class="hits">6</span>
          
          <code class="ruby">    client = Elasticsearch::Client.new log: true, url: ES_SERVER</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="17">
          <span class="hits">6</span>
          
          <code class="ruby">    if client.exists? index: GLOSSARY_INDEX, type: GLOSSARY_TYPE, id: _id</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="18">
          <span class="hits">5</span>
          
          <code class="ruby">      client.delete index: GLOSSARY_INDEX, type: GLOSSARY_TYPE, id: _id</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="19">
          <span class="hits">5</span>
          
          <code class="ruby">      client.indices.refresh index: GLOSSARY_INDEX</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="20">
          <span class="hits">5</span>
          
          <code class="ruby">      return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">      return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.get_glossary(str) </code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="27">
          <span class="hits">16</span>
          
          <code class="ruby">    client = Elasticsearch::Client.new log: true, url: ES_SERVER</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="28">
          <span class="hits">16</span>
          
          <code class="ruby">    glossary = []</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="29">
          <span class="hits">16</span>
          
          <code class="ruby">    data_hash = JSON.parse(str)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="30">
          <span class="hits">15</span>
          
          <code class="ruby">    query = self.buildQuery(data_hash)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="32">
          <span class="hits">15</span>
          
          <code class="ruby">    begin</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="33">
          <span class="hits">15</span>
          
          <code class="ruby">      ret = client.search index: GLOSSARY_INDEX, type: GLOSSARY_TYPE, body: query</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="34">
          <span class="hits">13</span>
          
          <code class="ruby">      for doc in ret[&#39;hits&#39;][&#39;hits&#39;]</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="35">
          <span class="hits">11</span>
          
          <code class="ruby">        glossary &lt;&lt; doc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    rescue Exception =&gt; e</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">      puts &#39;Exception in get_glossary: &#39; + e.message</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="41">
          <span class="hits">15</span>
          
          <code class="ruby">    return glossary</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.add_glossary(jsonStr)</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="45">
          <span class="hits">18</span>
          
          <code class="ruby">    client = Elasticsearch::Client.new log: true, url: ES_SERVER</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="46">
          <span class="hits">18</span>
          
          <code class="ruby">    begin</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="47">
          <span class="hits">18</span>
          
          <code class="ruby">      data_hash = JSON.parse(jsonStr)</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="48">
          <span class="hits">17</span>
          
          <code class="ruby">      if self.validationInsert(data_hash)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="49">
          <span class="hits">15</span>
          
          <code class="ruby">        data_hash = self.updateTermName (data_hash)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="50">
          <span class="hits">15</span>
          
          <code class="ruby">        _id = self.generate_id_for_glossary_term(data_hash)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="51">
          <span class="hits">15</span>
          
          <code class="ruby">        if !client.exists? index: GLOSSARY_INDEX, type: GLOSSARY_TYPE, id: _id</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="52">
          <span class="hits">14</span>
          
          <code class="ruby">          str = data_hash.to_s.gsub(&quot;=&gt;&quot;, &#39;:&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="54">
          <span class="hits">14</span>
          
          <code class="ruby">          client.index index: GLOSSARY_INDEX,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">                 type: GLOSSARY_TYPE,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">                 id: _id,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">                 body: str</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">        </code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="59">
          <span class="hits">14</span>
          
          <code class="ruby">          client.indices.refresh index: GLOSSARY_INDEX</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="61">
          <span class="hits">14</span>
          
          <code class="ruby">          return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">        else</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">          return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">      else</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="66">
          <span class="hits">2</span>
          
          <code class="ruby">        return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">    rescue Exception =&gt; e</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">      return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.buildQuery(jsonCtx)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="74">
          <span class="hits">15</span>
          
          <code class="ruby">    dQuery = []  </code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="75">
          <span class="hits">15</span>
          
          <code class="ruby">    dContext = []</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="76">
          <span class="hits">15</span>
          
          <code class="ruby">    jsonDc = {}</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="77">
          <span class="hits">15</span>
          
          <code class="ruby">    lang = &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="79">
          <span class="hits">15</span>
          
          <code class="ruby">    if jsonCtx.has_key?(&#39;post&#39;) and !jsonCtx.has_key?(&#39;term&#39;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="80">
          <span class="hits">2</span>
          
          <code class="ruby">      jsonCtx[&quot;term&quot;] = jsonCtx[&quot;post&quot;]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="81">
          <span class="hits">2</span>
          
          <code class="ruby">      jsonCtx[&quot;post&quot;] = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="84">
          <span class="hits">15</span>
          
          <code class="ruby">    if !jsonCtx.has_key?(&#39;lang&#39;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="85">
          <span class="hits">1</span>
          
          <code class="ruby">      lang = DYSL.classifyReturnAll(jsonCtx[&quot;term&quot;],STOPWORDS_PATH).rubify</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="86">
          <span class="hits">1</span>
          
          <code class="ruby">      if lang.length &gt; 0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="87">
          <span class="hits">1</span>
          
          <code class="ruby">        jsonCtx[&#39;lang&#39;] =  lang[0][1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="91">
          <span class="hits">15</span>
          
          <code class="ruby">    term = jsonCtx[&quot;lang&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="93">
          <span class="hits">15</span>
          
          <code class="ruby">    if jsonCtx[term].nil?</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="94">
          <span class="hits">15</span>
          
          <code class="ruby">      jsonCtx[term] = jsonCtx[&quot;term&quot;]</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="95">
          <span class="hits">15</span>
          
          <code class="ruby">      jsonCtx[&quot;term&quot;] = nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="98">
          <span class="hits">15</span>
          
          <code class="ruby">    jsonCtx.each do |key, value|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">      #2 levels {u&#39;source&#39;: {u&#39;url&#39;: u&#39;testSite.url&#39;, u&#39;name&#39;: u&#39;test site&#39;}, u&#39;post&#39;: u&#39;lala lala&#39;, u&#39;data_source&#39;: u&#39;dictionary&#39;}</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="100">
          <span class="hits">60</span>
          
          <code class="ruby">      if (!value.nil? &amp;&amp; !key.nil?)</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="101">
          <span class="hits">43</span>
          
          <code class="ruby">        object = value</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="102">
          <span class="hits">43</span>
          
          <code class="ruby">        if String === object</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="103">
          <span class="hits">30</span>
          
          <code class="ruby">          if (key != &quot;context&quot;) or !(value.class is Int)</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="104">
          <span class="hits">30</span>
          
          <code class="ruby">            dQuery &lt;&lt; &#39;{&quot;match&quot;: {&quot;&#39;+key+&#39;&quot;: &quot;&#39;+value+&#39;&quot;}}&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">        elsif Hash === object</code>
        </li>
      
        <li class="covered" data-hits="13" data-linenumber="107">
          <span class="hits">13</span>
          
          <code class="ruby">          value.each do |k, v|</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="108">
          <span class="hits">14</span>
          
          <code class="ruby">            if Hash === v   #context (2o level)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="109">
          <span class="hits">5</span>
          
          <code class="ruby">              v.each do |kk, vv|</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="110">
          <span class="hits">10</span>
          
          <code class="ruby">                dQuery &lt;&lt; &#39;{&quot;match&quot;: {&quot;&#39;+key+&quot;.&quot;+k+&quot;.&quot;+kk+&#39;&quot;: &quot;&#39;+vv+&#39;&quot;}}&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">            elsif Array === v</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="113">
          <span class="hits">1</span>
          
          <code class="ruby">              for n in v</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="114">
          <span class="hits">2</span>
          
          <code class="ruby">                dQuery &lt;&lt; &#39;{&quot;query_string&quot; : {&quot;fields&quot; : [&quot;&#39;+key+&quot;.&quot;+k+&#39;&quot;],&quot;query&quot; : &quot;&#39;+n+&#39;&quot;} }&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">            else</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="117">
          <span class="hits">8</span>
          
          <code class="ruby">              dQuery &lt;&lt; &#39;{&quot;match&quot;: {&quot;&#39;+key+&quot;.&quot;+k+&#39;&quot;: &quot;&#39;+v+&#39;&quot;}}&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="124">
          <span class="hits">15</span>
          
          <code class="ruby">    sQuery = dQuery.to_s</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="125">
          <span class="hits">15</span>
          
          <code class="ruby">    sQuery = sQuery.gsub &#39;&quot;, &quot;&#39;, &#39;,&#39;</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="126">
          <span class="hits">15</span>
          
          <code class="ruby">    sQuery = sQuery.gsub &#39;[&quot;{&#39;, &#39;[{&#39;</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="127">
          <span class="hits">15</span>
          
          <code class="ruby">    sQuery = sQuery.gsub &#39;}&quot;]&#39;, &#39;}]&#39;</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="128">
          <span class="hits">15</span>
          
          <code class="ruby">    sQuery = sQuery.gsub &quot;\\&quot;,&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="130">
          <span class="hits">15</span>
          
          <code class="ruby">    if (dQuery.length  &gt; 0)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="131">
          <span class="hits">15</span>
          
          <code class="ruby">      dc = &#39;{&quot;query&quot;: { &quot;bool&quot;: { &quot;must&quot;: &#39;+ sQuery +&#39;}}}&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="134">
          <span class="hits">15</span>
          
          <code class="ruby">    return dc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="137">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.generate_id_for_glossary_term(data_hash)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="138">
          <span class="hits">15</span>
          
          <code class="ruby">    str = &#39;glossary&#39;+&quot;:&quot;+  data_hash[data_hash[&quot;lang&quot;]]+&quot;:&quot;+ data_hash[&quot;lang&quot;]</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="139">
          <span class="hits">15</span>
          
          <code class="ruby">    if data_hash.has_key?(&quot;context&quot;)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="140">
          <span class="hits">15</span>
          
          <code class="ruby">      if data_hash[&quot;context&quot;].has_key?(&quot;source&quot;)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="141">
          <span class="hits">8</span>
          
          <code class="ruby">        if data_hash[&quot;context&quot;][&quot;source&quot;].has_key?(&quot;name&quot;)</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="142">
          <span class="hits">8</span>
          
          <code class="ruby">          str = str + &quot;:&quot;+  data_hash[&quot;context&quot;][&quot;source&quot;][&quot;name&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="145">
          <span class="hits">15</span>
          
          <code class="ruby">      if data_hash[&quot;context&quot;].has_key?(&quot;page_id&quot;)</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="146">
          <span class="hits">5</span>
          
          <code class="ruby">        str = str + &quot;:&quot;+  data_hash[&quot;context&quot;][&quot;page_id&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="149">
          <span class="hits">15</span>
          
          <code class="ruby">    id = Digest::MD5.hexdigest(str)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="150">
          <span class="hits">15</span>
          
          <code class="ruby">    return id</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="153">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.updateTermName (jsonDoc)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="154">
          <span class="hits">15</span>
          
          <code class="ruby">    term = jsonDoc[&quot;lang&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="156">
          <span class="hits">15</span>
          
          <code class="ruby">    if jsonDoc[term].nil?</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="157">
          <span class="hits">15</span>
          
          <code class="ruby">      jsonDoc[term] = jsonDoc[&quot;term&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="159">
          <span class="hits">15</span>
          
          <code class="ruby">    return jsonDoc</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="162">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.validationInsert (jsonDoc)</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="163">
          <span class="hits">17</span>
          
          <code class="ruby">    if !jsonDoc[&quot;lang&quot;].nil?</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="164">
          <span class="hits">16</span>
          
          <code class="ruby">      term = jsonDoc[&quot;lang&quot;]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="166">
          <span class="hits">16</span>
          
          <code class="ruby">      if !jsonDoc[term].nil? or !jsonDoc[&#39;term&#39;].nil?</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="167">
          <span class="hits">15</span>
          
          <code class="ruby">        return true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">      else    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="169">
          <span class="hits">1</span>
          
          <code class="ruby">        return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">    else    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="172">
          <span class="hits">1</span>
          
          <code class="ruby">      return false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="176">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.create_index</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="177">
          <span class="hits">63</span>
          
          <code class="ruby">    index = CONFIG[&#39;glossary_index&#39;] </code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="178">
          <span class="hits">63</span>
          
          <code class="ruby">    es_server = CONFIG[&#39;elasticsearch_server&#39;].to_s + &#39;:&#39; + CONFIG[&#39;elasticsearch_port&#39;].to_s</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="180">
          <span class="hits">63</span>
          
          <code class="ruby">    return if es_server === &#39;:&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="182">
          <span class="hits">63</span>
          
          <code class="ruby">    client = Elasticsearch::Client.new log: true, url: es_server</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    </code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="184">
          <span class="hits">63</span>
          
          <code class="ruby">    if client.indices.exists? index: index</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="185">
          <span class="hits">63</span>
          
          <code class="ruby">      client.indices.delete index: index</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">    end  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="188">
          <span class="hits">63</span>
          
          <code class="ruby">    client.indices.create index: index, body: Mlg::ElasticSearch.schema</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="191">
          <span class="hits">1</span>
          
          <code class="ruby">  def self.schema</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">    &#39;{&quot;mappings&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">         &quot;glossary&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">            &quot;properties&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">               &quot;ar&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;arabic&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">               &quot;bg&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;bulgarian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">               &quot;ca&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;catalan&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">               &quot;cs&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;czech&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">               &quot;da&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;danish&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">               &quot;de&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;german&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">               &quot;el&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;greek&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">               &quot;en&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;english&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">               &quot;es&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;spanish&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">               &quot;eu&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;basque&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">               &quot;fa&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;persian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">               &quot;fi&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;finnish&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">               &quot;fr&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;french&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="246">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="247">
          
          
          <code class="ruby">               &quot;ga&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;irish&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">               &quot;gl&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="253">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;galician&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">               &quot;hi&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;hindi&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">               &quot;hu&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;hungarian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">               &quot;hy&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;armenian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">               &quot;id&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="268">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="269">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;indonesian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="271">
          
          
          <code class="ruby">               &quot;it&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;italian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">               &quot;lv&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;latvian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">               &quot;nl&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;dutch&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">               &quot;no&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;norwegian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">               &quot;pt&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;brazilian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">               &quot;ro&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="292">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="293">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;romanian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="294">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">               &quot;ru&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;russian&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">               &quot;sv&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;swedish&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">               &quot;term&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">               &quot;th&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;thai&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">               &quot;tr&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;turkish&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">               },</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">               &quot;zh&quot;: {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">                  &quot;type&quot;: &quot;string&quot;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">                  &quot;analyzer&quot;: &quot;chinese&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="317">
          
          
          <code class="ruby">               }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">            }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby">         }</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="320">
          <span class="hits">63</span>
          
          <code class="ruby">      }}&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="321">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
        <div class="source_table" id="813d95b38a1f9b4133105e77f982cc919f7328e8">
  <div class="header">
    <h3>lib/sample_data.rb</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">module SampleData</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">  </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">  # Methods to generate random data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">  def random_string(length = 10)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="6">
          <span class="hits">33</span>
          
          <code class="ruby">    (0...length).map{ (65 + rand(26)).chr }.join</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  def random_email</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    random_string + &#39;@&#39; + random_string + &#39;.xyz&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  def random_number(max = 50)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">    rand(max) + 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  def create_api_key</code>
        </li>
      
        <li class="covered" data-hits="52" data-linenumber="18">
          <span class="hits">52</span>
          
          <code class="ruby">    ApiKey.create! </code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">end</code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
